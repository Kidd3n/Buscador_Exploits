#!/bin/bash

test -f /usr/bin/git
comprobacion_git=$(echo $?)

test -f /usr/bin/searchsploit
comprobacion_searchsploit=$(echo $?)

function instalar_git {
	apt install git -y
}

function instalar_sarchsploit {
	git clone https://gitlab.com/exploit-database/exploitdb.git && cd exploitdb/ && mv * /usr/bin && cd .. && rm -r exploitdb/
}

if test $comprobacion_searchsploit == "0" && test $comprobacion_git == "0"; then
	echo "Las dependencias están instaladas"
	read -p "Inserta el nombre del programa que quieras comprobar: " busqueda
	searchsploit $busqueda
	read -p "Inserta el exploit que quieras descargar: " eleccion
	searchsploit -m $eleccion
else
	echo "Hay que instalar dependencias"
	if test $comprobacion_git != "0"; then
		instalar_git
	fi

	if test $comprobacion_searchsploit != "0"; then
		instalar_searchsploit
	fi

	read -p "Inserte la búsqueda que quieras hacer: " busqueda
	searchsploit $busqueda
	read -p "Inserte la elección del exploit: " eleccion
	searchsploit -m $eleccion
fi
