#!/bin/bash

test -f /usr/bin/searchsploit
comprobacion_searchsploit=$(echo $?)

test -f /usr/bin/git
comprobacion_git=$(echo $?)

if test $comprobacion_searchsploit == "0" && test $comprobacion_git == "0"; then

	echo "Las dependencias de este script están satisfechas"
	read -p "Inserta la búsqueda que quieras hacer: " busqueda
        searchsploit $busqueda
	read -p "Pega a continuación el script que quieras descargar: " eleccion
	searchsploit -m $eleccion
else
	echo "Hay que instalar dependencias"
	if test $comprobacion_git != "0"; then
                apt install git -y
	fi

	if test $comprobacion_searchsploit != "0"; then
		git clone https://gitlab.com/exploit-database/exploitdb.git && cd exploitdb && mv * /usr/bin && cd .. &&  rm -r exploitdb/
	fi

	read -p "Inserta la búsqueda que quieras hacer: " busqueda
	searchsploit $busqueda
	read -p "Pega a continuación el script que quieras descargar: " eleccion
	searchsploit -m $eleccion
fi
